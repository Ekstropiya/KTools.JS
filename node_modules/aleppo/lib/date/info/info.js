'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.daysCountInMonth = exports.yearType = exports.isCommon = exports.isLeap = undefined;

var _constants = require('../../shared/constants');

var _funcs = require('../../shared/funcs');

var _funcs2 = _interopRequireDefault(_funcs);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var yearType = function yearType() {
  var year = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Date().getUTCFullYear();
  var isProgrammaticCall = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

  // validate only if the user call the function
  if (!isProgrammaticCall) {
    if (typeof year !== 'number' || year < 0) return (0, _funcs2.default)(year);
  }
  if (year % 4 !== 0) return 'common';else if (year % 100 !== 0) return 'leap';else if (year % 400 !== 0) return 'common';
  return 'leap';
};

var isLeap = function isLeap() {
  var year = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Date().getUTCFullYear();
  var isProgrammaticCall = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
  return yearType(year, isProgrammaticCall) === 'leap';
};

var isCommon = function isCommon() {
  var year = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new Date().getUTCFullYear();
  var isProgrammaticCall = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
  return yearType(year, isProgrammaticCall) === 'common';
};

// month
var daysCountInMonth = function daysCountInMonth(monthNum) {
  var year = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : new Date().getUTCFullYear();
  var isProgrammaticCall = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;

  var isProg = isProgrammaticCall;
  var month = monthNum;
  if (monthNum === undefined) {
    month = new Date().getUTCMonth();
    isProg = true;
  }
  if (isProg) {
    if (month === 1) {
      if (isLeap(year, true)) {
        return 29;
      }
      return 28;
    }
    return _constants.MONTH_DAY_COUNT[month];
  }
  // called directly by user
  if (month === 2) {
    if (isLeap(year, true)) {
      return 29;
    }
    return 28;
  }
  if (month > 12 || month < 0 || year < 0 || typeof month !== 'number' || typeof year !== 'number') {
    return (0, _funcs2.default)(month);
  }
  return _constants.MONTH_DAY_COUNT[month === 0 ? 0 : month - 1];
};

exports.isLeap = isLeap;
exports.isCommon = isCommon;
exports.yearType = yearType;
exports.daysCountInMonth = daysCountInMonth;